{"componentChunkName":"component---src-templates-the-notebook-js","path":"/the-notebook/ops/docker","result":{"data":{"content":{"frontmatter":{"title":"Docker","path":"the-notebook/ops/docker","type":"docs"},"html":"<h3>Docker</h3>\n<h4>Build image</h4>\n<p>docker build -t ${IMAGE}:${VERSION} ${LOCATION}</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker build -t hub.dezenter.org/dezenter/web:0.1.0 .</code></pre></div>\n<h4>tag image to private registry</h4>\n<ul>\n<li>\n<p>docker image tag &#x3C;local<em>image:tag> <host>/&#x3C;host</em>image:tag></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker image tag dezenter/air:0.1.0 hub.dezenter.org/dezenter/air:0.1.0</code></pre></div>\n</li>\n</ul>\n<h4></h4>\n<ul>\n<li>docker (hub) image push <username>/&#x3C;project<em>name>:&#x3C;tag</em>version></li>\n<li>\n<p>docker (private) image push <url>/<namespace>/&#x3C;project<em>name>:&#x3C;tag</em>version></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker image push hub.dezenter.org/dezenter/air:0.1.0</code></pre></div>\n</li>\n</ul>\n<h4>use command</h4>\n<ul>\n<li>\n<p>docker exec -it &#x3C;container_name> <command></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker exec -it docker_test bash</code></pre></div>\n</li>\n</ul>\n<h4>copy</h4>\n<p>docker cp</p>\n<ul>\n<li>\n<p>host to container <file> &#x3C;container<em>name>:/&#x3C;to</em>path></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker cp rabbitmqadmin docker_rabbitmq_1:/usr/local/bin</code></pre></div>\n</li>\n<li>\n<p>container to host &#x3C;container<em>name>:/<path>/<file> &#x3C;to</em>path></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker cp jenkins:/var/jenkins_home/secrets/initialAdminPassword C:/Users/tdcm025</code></pre></div>\n</li>\n</ul>\n<h4>remove file</h4>\n<ul>\n<li>\n<p>docker exec <container-name> rm -rf <file></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker exec docker_rabbitmq_1 rm -rf rmq-setup.sh</code></pre></div>\n</li>\n</ul>\n<h4>remove volume data</h4>\n<ul>\n<li>docker volume ls</li>\n<li>\n<p>docker volume rm <name></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker volume rm docker_rabbitmq-data</code></pre></div>\n</li>\n<li>\n<p>ex remove all volume</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker volume rm `docker volume ls -q -f dangling=true`</code></pre></div>\n</li>\n<li>\n<p>removing only unused volumes:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker volume prune</code></pre></div>\n</li>\n</ul>\n<h4>image</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker image prune =&gt; remove none used</code></pre></div>\n<h4>container</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker container prune =&gt; remove none used container</code></pre></div>\n<h4>check disk</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">docker system df</code></pre></div>\n<h3>Docker Compose</h3>\n<h4>Build image</h4>\n<h5>version 3</h5>\n<ul>\n<li>links:  ผูก service เข้าด้วยกัน รูปแบบ Sevice name:Alias name</li>\n<li>depens_on: start service หลังจาก service ที่อยู่ depend on เริ่มต้นการทำงานเสร็จแล้ว</li>\n</ul>\n<h4>run</h4>\n<ul>\n<li>docker-compose run -d --build</li>\n</ul>\n<h4>build</h4>\n<ul>\n<li>docker-compose build</li>\n</ul>\n<h4>exec</h4>\n<ul>\n<li>docker-compose exec -it <name> bash</li>\n</ul>\n<h4>.env</h4>\n<ul>\n<li>ใน environment ใช้ $$ => ex: VAR=$${VARS}</li>\n</ul>\n<h4>link</h4>\n<ul>\n<li><a href=\"https://training.play-with-docker.com\">training</a></li>\n</ul>\n<p>--remove-orphans</p>"}},"pageContext":{"isCreatedByStatefulCreatePages":false,"pathSlug":"the-notebook/ops/docker"}}}